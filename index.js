const mainForm=document.querySelector("#main-form"),API_ENDPOINT="https://buildforsdg-covid19-estimator.herokuapp.com/api/v1/on-covid-19",descKeys={currentlyInfected:"Currently Infected",infectionsByRequestedTime:"Infections by Requested Time",severeCasesByRequestedTime:"Severe Cases by Requested Time",hospitalBedsByRequestedTime:"Hospital Beds by Requested Time",casesForICUByRequestedTime:"Cases for ICU by Requested Time",casesForVentilatorsByRequestedTime:"Cases for Ventilators by Requested Time",dollarsInFlight:"Dollars in Flight"},showLoadingGif=(e=!0)=>{e?(document.querySelector(".report-card").classList.remove("show"),document.querySelector(".error-card").classList.remove("show"),document.querySelector("#loading-gif").style.display="block"):document.querySelector("#loading-gif").style.display="none"},displayResults=e=>{["impact","severeImpact"].forEach(a=>{const t=e[a],o=Object.entries(t).reduce((e,[a,t])=>`${e} <p class="card-text"><span>${descKeys[a]}:</span> <span class="float-right">${t.toLocaleString()}</span></p>`,"");document.querySelector(`#${a}-card .card-body`).innerHTML=o}),document.querySelector(".report-card").classList.add("show"),document.querySelector(".report-card").scrollIntoView()},handleResponse=async e=>{const a=await e.json();switch(console.log(a),e.status){case 200:displayResults(a);break;case 400:displayValidationError(a);break;default:displayError(a)}},postInputData=async e=>{showLoadingGif();const a=await fetch(API_ENDPOINT,{body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"}});showLoadingGif(!1),await handleResponse(a)};mainForm.addEventListener("submit",e=>{e.preventDefault();const a={region:{name:mainForm.querySelector("[data-region-name]").value,avgAge:Number(mainForm.querySelector("[data-avg-age]").value),avgDailyIncomeInUSD:Number(mainForm.querySelector("[data-avg-income]").value),avgDailyIncomePopulation:Number(mainForm.querySelector("[data-avg-population]").value/100)},periodType:mainForm.querySelector("[data-period-type]").value,timeToElapse:Number(mainForm.querySelector("[data-time-to-elapse]").value),reportedCases:Number(mainForm.querySelector("[data-reported-cases]").value),population:Number(mainForm.querySelector("[data-population]").value),totalHospitalBeds:Number(mainForm.querySelector("[data-total-hospital-beds]").value)};console.log(JSON.stringify(a)),postInputData(a)});